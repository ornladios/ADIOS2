cmake_minimum_required(VERSION 3.12)
project(ADIOS2_SUPERBUILD C CXX)

include(ExternalProject)

ExternalProject_Add(adios2
  SOURCE_DIR "$ENV{SRC_DIR}"
  INSTALL_DIR "$ENV{PREFIX}"
  CMAKE_GENERATOR "$ENV{CMAKE_GENERATOR}"
  CMAKE_ARGS
    -DCMAKE_INSTALL_PREFIX=<INSTALL_DIR>
    -DCMAKE_BUILD_TYPE=Release
    -DBUILD_SHARED_LIBS=ON
    -DADIOS2_BUILD_EXAMPLES=OFF
    -DADIOS2_BUILD_TESTING=OFF
    -DADIOS2_USE_Python=ON
    -DPYTHON_EXECUTABLE=$ENV{PYTHON}
    -DADIOS2_USE_MPI=ON
)
